@startuml UC032
skinparam actorStyle awesome

actor "Analyste conformité" as Analyste
participant "Système" as Système
participant "Base Clients" as Clients
participant "Base Comptes" as Comptes

== Blocage d’un client avec motif ==

Analyste -> Système : Accède à la fiche client
activate Analyste
activate Système
Système -> Clients : Charge données client
activate Clients
Système --> Analyste : Affiche fiche client
Analyste -> Système : Sélectionne "Bloquer le client"
Analyste -> Système : Sélectionne "Mettre en opposition"
Analyste -> Système : Saisit le motif de blocage

alt Motif renseigné et client non bloqué
    Système -> Clients : Met à jour le statut client (Bloqué)
    Système -> Comptes : Génère alerte pour comptes associés
    activate Comptes
    Comptes --> Système : Liste des comptes associés
    Système -> Comptes : Met à jour statut des comptes (Bloqué)
    Système -> Comptes : Bloque tous les comptes associés
    Système -> Système : Journalise l'action
    Système -> Analyste : Affiche message de confirmation
else Motif manquant
    Système -> Analyste : Refuse blocage, motif requis
else Client déjà bloqué
    Système -> Analyste : Affiche alerte "Client déjà bloqué"
end

@enduml
