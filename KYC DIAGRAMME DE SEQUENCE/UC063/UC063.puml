@startuml UC063
skinparam actorStyle awesome

actor "Archiviste / Gestionnaire" as Utilisateur
participant "Interface d’archivage" as UI
participant "Système de gestion documentaire" as Système
database "Base documentaire" as BDD

== Création du dossier client ==
Utilisateur -> UI : Finaliser un dossier client avec documents classés
activate Utilisateur
activate UI
UI -> Système : Déclencher génération d’arborescence
activate Système

== Lecture des classifications ==
Système -> BDD : Lire les classifications des documents du dossier
activate BDD
BDD --> Système : Liste des classifications
deactivate BDD

== Génération des répertoires ==
alt Longueur des noms conforme
    Système -> Système : Générer chemin (ex : /clients/entreprise/NIF123456/justificatifs_fiscaux)
else Nom trop long
    Système -> Système : Tronquer ou reformuler le nom
end

Système -> BDD : Créer ou mettre à jour les répertoires
activate BDD
BDD --> Système : Confirmation création structure
deactivate BDD

== Réorganisation des documents ==
Système -> BDD : Associer les documents aux bons répertoires
activate BDD
BDD --> Système : Association réussie
deactivate BDD

== Affichage et utilisation ==
Système --> UI : Afficher structure générée
deactivate Système
UI --> Utilisateur : Structure accessible (consultation/export/archivage)
deactivate UI
deactivate Utilisateur
@enduml
