@startuml DiagrammeClasseEntrepriseKYC
skinparam class {
    BackgroundColor #E0F7FA
    BorderColor #0097A7
}
skinparam linetype ortho

' --- Entités principales ---
class Entreprise {
    +id : String
    +raisonSociale : String
    +dateCreation : Date
    +rccm : String
    +adresse : String
    +niu : String
    +categorieInterne : String
    +categorieBanqueCentrale : String
    +secteurActivite : String
    +capitalSocial : Float
    +chiffreAffaire : Float
    +effectif : Integer
    +statut : String
}

class Dirigeant {
    +id : String
    +nom : String
    +prenom : String
    +dateNaissance : Date
    +nationalite : String
    +cni : String
    +dateDelivranceCNI : Date
    +lieuDelivranceCNI : String
    +contact : String
}

class Actionnaire {
    +id : String
    +nom : String
    +prenom : String
    +pourcentage : Float
    +type : String // personne physique/morale
}

class Compte {
    +numero : String
    +rib : String
    +statut : String
    +dateOuverture : Date
    +dateCloture : Date
    +type : String
}

class Document {
    +id : String
    +type : String
    +dateDepot : Date
    +statut : String
}

class Gestionnaire {
    +id : String
    +nom : String
    +prenom : String
}

' --- Opérations/Services ---
class Preenregistrement {
    +datePreenregistrement : Date
    +canal : String // web, agence
}

class Enregistrement {
    +dateEnregistrement : Date
    +canal : String
}

class Modification {
    +dateModification : Date
    +champModifie : String
    +ancienneValeur : String
    +nouvelleValeur : String
}

class Blocage {
    +dateBlocage : Date
    +motif : String
    +typeBlocage : String // entreprise ou compte
}

class Deblocage {
    +dateDeblocage : Date
    +motif : String
    +typeDeblocage : String // entreprise ou compte
}

' --- Contrôles ---
class ControleIdentite {
    +statutValidation : String
    +dateControle : Date
}

class ControleConformite {
    +statutDoublon : Boolean
    +statutBlacklist : Boolean
    +statutPPE : Boolean
    +statutFATCA : Boolean
}

' --- Relations principales ---
Entreprise "1" -- "0..*" Compte : possède >
Entreprise "1" -- "0..*" Document : fournit >
Entreprise "1" -- "1..*" Dirigeant : dirigée par >
Entreprise "1" -- "1..*" Actionnaire : détenue par >
Compte "1" -- "0..*" Document : justificatif >
Gestionnaire "1" -- "0..*" Compte : crée >
Compte "1" -- "1" ControleIdentite : contrôle identité >
Compte "1" -- "1" ControleConformite : contrôle conformité >

' --- Relations opérations ---
Entreprise "1" -- "0..*" Preenregistrement : pré-enregistre >
Entreprise "1" -- "0..*" Enregistrement : enregistre >
Entreprise "1" -- "0..*" Modification : modifie >
Entreprise "1" -- "0..*" Blocage : bloque >
Entreprise "1" -- "0..*" Deblocage : débloque >

Compte "1" -- "0..*" Modification : modifie >
Compte "1" -- "0..*" Blocage : bloque >
Compte "1" -- "0..*" Deblocage : débloque >

Gestionnaire "1" -- "0..*" Preenregistrement : initie >
Gestionnaire "1" -- "0..*" Enregistrement : valide >
Gestionnaire "1" -- "0..*" Modification : effectue >
Gestionnaire "1" -- "0..*" Blocage : demande >
Gestionnaire "1" -- "0..*" Deblocage : demande >

@enduml